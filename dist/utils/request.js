"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,u){try{var a=t[o](u),i=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}Object.defineProperty(exports,"__esModule",{value:!0});var _wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy);exports.default=function(){function e(e,r){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"post"===t.method&&(t.header={"content-type":"application/x-www-form-urlencoded"}),r&&(t.data._token=_wepy2.default.getStorageSync("_token")),e.next=4,_wepy2.default.request(t);case 4:return n=e.sent,500===n.statusCode&&_wepy2.default.showModal({title:"提示",content:"服务器错误,"+n.data.errmsg}),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return e}();