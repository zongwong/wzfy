"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(s,i){try{var a=t[s](i),c=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}return n("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_wepy=require("./../../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_api=require("./../../interfaces/api.js"),_api2=_interopRequireDefault(_api),_wxapi=require("./../../interfaces/wxapi.js"),_wxapi2=_interopRequireDefault(_wxapi),_select=require("./../../components/select.js"),_select2=_interopRequireDefault(_select),_pagination=require("./../../mixin/pagination.js"),_pagination2=_interopRequireDefault(_pagination),New=function(e){function t(){var e,r,n,s;_classCallCheck(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=n=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n.config={navigationBarTitleText:"新房"},n.$repeat={},n.$props={areaSelect:{"xmlns:v-bind":"","v-bind:list.sync":"areaList","v-bind:status.sync":"areaStatus"},priceSelect:{"xmlns:v-bind":"","v-bind:list.sync":"priceList","v-bind:status.sync":"priceStatus"},typeSelect:{"xmlns:v-bind":"","v-bind:list.sync":"typeList","v-bind:status.sync":"typeStatus"},propertySelect:{"xmlns:v-bind":"","v-bind:list.sync":"propertyList","v-bind:status.sync":"propertyStatus"}},n.$events={},n.components={areaSelect:_select2.default,priceSelect:_select2.default,typeSelect:_select2.default,propertySelect:_select2.default},n.mixins=[_pagination2.default],n.data={mycity:"",all:null,areaList:[],priceList:[{text:"不限",selected:!1},{text:"100万以下",selected:!1},{text:"100-150万",selected:!1},{text:"150-200万",selected:!1},{text:"200-250万",selected:!1},{text:"250-300万",selected:!1},{text:"300-500万",selected:!1},{text:"500-1000万",selected:!1},{text:"1000万以上",selected:!1}],typeList:[],propertyList:[],areaStatus:!1,priceStatus:!1,typeStatus:!1,propertyStatus:!1,page:{list:[]},params:{city:"",total:"",property_type:"",apartment_layout:""}},n.methods={areaSelect:function(){this.priceStatus=!1,this.typeStatus=!1,this.propertyStatus=!1,this.areaStatus=!0},priceSelect:function(){this.areaStatus=!1,this.typeStatus=!1,this.propertyStatus=!1,this.priceStatus=!0},typeSelect:function(){this.priceStatus=!1,this.areaStatus=!1,this.propertyStatus=!1,this.typeStatus=!0},propertySelect:function(){this.priceStatus=!1,this.typeStatus=!1,this.areaStatus=!1,this.propertyStatus=!0}},n.events={selected:function(){function e(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("xz"),e.next=3,this.search();case 3:t=e.sent,console.log(t);case 5:case"end":return e.stop()}},e,this)}));return e}()},s=r,_possibleConstructorReturn(n,s)}return _inherits(t,e),_createClass(t,[{key:"onLoad",value:function(){function e(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_wxapi2.default.getCity();case 2:return t=e.sent,console.log(t),this.mycity=t,this.params.city=t,this.$apply(),e.next=9,_api2.default.builds({});case 9:return this.page=e.sent,console.log(this.page),this.$apply(),e.next=14,this.next();case 14:return e.next=16,_api2.default.houseType();case 16:return r=e.sent,e.next=19,_api2.default.apartmentLayout();case 19:return n=e.sent,e.next=22,_api2.default.cities();case 22:s=e.sent,this.typeList=this.createArr(n),this.propertyList=this.createArr(r),this.areaList=this.createArr(s,t),this.$apply();case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"createArr",value:function(e,t){if(!Array.isArray(e))return!1;var r=[{text:"不限",selected:!1}];return e.forEach(function(e){t&&e==t?r.push({text:e,selected:!0}):r.push({text:e,selected:!1})}),r}},{key:"getSelected",value:function(e){var t=e.filter(function(e){return e.selected&&"不限"!=e.text});return console.log(t),t.length?t[0].text:""}},{key:"search",value:function(){function e(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.params={city:this.getSelected(this.areaList),total:this.getSelected(this.priceList),property_type:this.getSelected(this.propertyList),apartment_layout:this.getSelected(this.typeList)},this.$apply(),this.page.reset(),e.next=5,this.next();case 5:case"end":return e.stop()}},e,this)}));return e}()}]),t}(_wepy2.default.page);Page(require("./../../npm/wepy/lib/wepy.js").default.$createPage(New,"pages/new/index"));